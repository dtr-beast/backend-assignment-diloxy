(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3613:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1715)}])},1715:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var s=n(7135),r=n(6091),a=n(9447),o=n(4405),i=n(4254),c=n(1527),l=n(365),$=n.n(l),u=n(1064),d=n(8295),g=n(6998),h=n(959),x=n(5727),m=function(e){return(0,x.Z)(e,new Date)};function p(e){var t=e.tokens,n=e.onRevoke;return(0,c.jsxs)("div",{className:"text-center bg-slate-700 max-w-fit mx-auto rounded-lg p-2 text-white",children:[(0,c.jsxs)("h1",{className:"",children:["You are already logged in to ",(0,c.jsxs)("em",{children:[t.length," devices"]})]}),(0,c.jsx)("h3",{children:"Choose any of the following devices to logout to, so you can login here"}),t.map(function(e,t){return(0,c.jsxs)("div",{children:[(0,c.jsxs)("h4",{className:"italic font-bold",children:["Device ",t+1]}),(0,c.jsxs)("p",{children:["Created:  ",(0,c.jsx)("span",{className:"font-semibold",children:m(new Date(e.createDate))})]}),(0,c.jsxs)("p",{children:["Last Used:  ",(0,c.jsx)("span",{className:"font-semibold",children:m(new Date(e.lastUseDate))})]}),(0,c.jsx)("button",{className:"p-2 text-white bg-slate-800 rounded-lg my-1",onClick:function(){return n(e.id)},children:"Logout"})]},e.id)})]})}var f=function e(t,n){(0,r.Z)(this,e),this.name=t,this.cta=n};f.LOGIN=new f("Login","Register Here"),f.REGISTER=new f("Register","Login Here");var b="http://localhost:3000";function N(){(0,h.useEffect)(function(){console.log("getCookie",(0,g.getCookie)("auth_token")),(0,g.getCookie)("auth_token")&&(console.log("Goot Cookie"),N.push("/success"))},[]);var e,t=(0,h.useState)(f.LOGIN),n=t[0],r=t[1],l=(0,h.useState)(void 0),x=l[0],m=l[1],N=(0,d.useRouter)(),v=(0,u.cI)(),j=v.register,y=v.handleSubmit,k=(v.formState,v.getValues),w=function(e){var t=k(),n=t.email,s=t.password;$().post("".concat(b,"/api/auth/revoke"),{token_id:e,email:n,password:s}),m(void 0)},_=(e=(0,s.Z)(function(e){var t,s,r,a;return(0,i.__generator)(this,function(o){switch(o.label){case 0:if(n!==f.LOGIN)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,$().post("".concat(b,"/api/auth/login"),e)];case 2:return t=o.sent(),(0,g.setCookie)("auth_token","Bearer ".concat(t.data.token)),N.push("/success"),[3,4];case 3:return s=o.sent(),console.log(s.response.data),m(s.response.data.revokeToken),[3,4];case 4:return[3,8];case 5:return o.trys.push([5,7,,8]),[4,$().post("".concat(b,"/api/auth/signup"),e)];case 6:return r=o.sent(),(0,g.setCookie)("auth_token","Bearer ".concat(r.data.token)),N.push("/success"),[3,8];case 7:return a=o.sent(),console.log(a.response.data),[3,8];case 8:return[2]}})}),function(t){return e.apply(this,arguments)});return(0,c.jsxs)("div",{children:[(0,c.jsx)("form",{onSubmit:y(_),className:"text-gray-600 body-font",children:(0,c.jsx)("div",{className:"container px-5 py-24 mx-auto flex flex-wrap items-center",children:(0,c.jsxs)("div",{className:"bg-gray-100 rounded-lg mx-auto p-8 flex flex-col mt-10 ",children:[(0,c.jsx)("h2",{className:"text-gray-900 text-lg font-medium title-font mb-5",children:n.name}),n===f.REGISTER&&(0,c.jsxs)("div",{className:"relative mb-4",children:[(0,c.jsx)("label",{className:"leading-7 text-sm text-gray-600",children:"Name"}),(0,c.jsx)("input",(0,o.Z)((0,a.Z)({type:"text"},j("name",{required:!0,maxLength:80})),{className:"w-full bg-white rounded border border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"}))]}),(0,c.jsxs)("div",{className:"relative mb-4",children:[(0,c.jsx)("label",{htmlFor:"email",className:"leading-7 text-sm text-gray-600",children:"Email"}),(0,c.jsx)("input",(0,o.Z)((0,a.Z)({type:"email"},j("email",{required:!0,pattern:/^\S+@\S+$/i})),{className:"w-full bg-white rounded border border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"}))]}),(0,c.jsxs)("div",{className:"relative mb-4",children:[(0,c.jsx)("label",{className:"leading-7 text-sm text-gray-600",children:"Password"}),(0,c.jsx)("input",(0,o.Z)((0,a.Z)({type:"password"},j("password",{required:!0,maxLength:80})),{className:"w-full bg-white rounded border border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"}))]}),(0,c.jsx)("button",{type:"submit",className:"text-white bg-green-500 border-0 py-2 px-8 focus:outline-none hover:bg-green-600 rounded text-lg",children:n.name}),(0,c.jsx)("div",{className:"relative mb-4",children:(0,c.jsx)("a",{className:"cursor-pointer",onClick:function(){return r(function(e){return e===f.LOGIN?f.REGISTER:f.LOGIN})},children:n.cta})})]})})}),x&&(0,c.jsx)(p,{tokens:x,onRevoke:w})]})}}},function(e){e.O(0,[320,774,888,179],function(){return e(e.s=3613)}),_N_E=e.O()}]);